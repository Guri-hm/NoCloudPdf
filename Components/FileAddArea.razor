@using Microsoft.AspNetCore.Components.Web
<div class="flex flex-col md:flex-row gap-2">

    <div class="hidden md:flex items-center relative non-sortable" data-position="@Position">
        @* <button
        class="w-6 h-6 bg-blue-500/60 hover:bg-blue-600 hover:bg-opacity-100 text-white rounded-full flex items-center justify-center transition-all duration-200"
        data-position="@Position" @onclick="@((e) => OnInsertButtonClick.InvokeAsync((Position, e)))">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="w-3 h-3">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
        </svg>
    </button> *@
        <DropdownButton T="string" MenuId="@($"addMenu-{Position}")" MenuItems="@GetAddMenuItems(Position)">
            <Trigger>
                <button
                    class="w-6 h-6 bg-blue-500/60 hover:bg-blue-600 hover:bg-opacity-100 text-white rounded-full flex items-center justify-center transition-all duration-200"
                    data-position="@Position">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="w-3 h-3">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                    </svg>
                </button>
            </Trigger>
        </DropdownButton>
    </div>
    <div class="w-full md:w-32 flex items-center justify-center relative border-2 border-dashed border-blue-400 rounded-lg cursor-pointer hover:bg-blue-50 transition non-sortable"
        @onclick="OnAddFileClick">
        <div class="flex flex-col items-center justify-center text-blue-500 p-4">
            <i class="fa-thin fa-plus text-3xl mb-2"></i>
            <span class="text-sm font-semibold">PDF，画像ファイルを追加</span>
        </div>
    </div>
</div>

@code {
    [Parameter] public int Position { get; set; }
    [Parameter] public EventCallback OnAddFileClick { get; set; }

    [Parameter] public EventCallback<int> OnInsertBlankPage { get; set; }
    [Parameter]
    public EventCallback<int> OnInsertPdfAtPosition
    {
        get; set;
    }

    private List<DropdownMenuItem> GetAddMenuItems(int index)
    {
        return new List<DropdownMenuItem>
{
new DropdownMenuItem
{
Label = "空白ページを追加",
OnClick = EventCallback.Factory.Create(this, () => OnInsertBlankPage.InvokeAsync(index))
},
new DropdownMenuItem
{
Label = "PDFを挿入",
OnClick = EventCallback.Factory.Create(this, () => OnInsertPdfAtPosition.InvokeAsync(index))
}
};
    }

}