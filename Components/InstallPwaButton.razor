@inject IJSRuntime JS

<button class="bg-blue-600 text-white font-bold py-2 px-4 rounded shadow hover:bg-blue-700 transition"
    @onclick="async () => await InstallPwaAsync()" style="display:@(canInstall ? "block" : "none")">
    インストール
</button>

@code {
    private bool canInstall = false;
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            var available = await JS.InvokeAsync<bool>("isInstallPromptAvailable");
            if (canInstall != available)
            {
                canInstall = available;
                StateHasChanged();
            }
        }
    }

    private async Task InstallPwaAsync()
    {
        // グローバル関数として呼び出す
        bool available = await JS.InvokeAsync<bool>("isInstallPromptAvailable");
        if (available)
        {
            await JS.InvokeVoidAsync("showInstallPrompt");
        }
        else
        {
            Console.WriteLine("インストールできません");
        }
    }
}