@inject NavigationManager Navigation
@inject NavigationManager Nav
@using NoCloudPdf.Components

<div class="bg-gray-800 px-4 py-1 flex items-center justify-between">
    <a class="text-white" href="@Nav.BaseUri">
        <img src="img/logo.webp" alt="NoCloudPDF" class="w-12 h-12 object-contain" />
    </a>
    <span class="text-white font-bold ml-4 md:hidden">
        @GetPageTitle()
    </span>
    <button title="Navigation menu"
        class="relative w-10 h-10 flex flex-col justify-center items-center md:hidden focus:outline-none"
        @onclick="ToggleNavMenu">
        <!-- 1本目 -->
        <span class="block absolute w-8 h-1 bg-white rounded transition-all duration-300 ease-in-out
        top-3 left-1 @(collapseNavMenu ? "" : "rotate-45 translate-y-3")"></span>
        <!-- 2本目 -->
        <span class="block absolute w-8 h-1 bg-white rounded transition-all duration-300 ease-in-out
        top-5 left-1 @(collapseNavMenu ? "" : "opacity-0")"></span>
        <!-- 3本目 -->
        <span class="block absolute w-8 h-1 bg-white rounded transition-all duration-300 ease-in-out
        top-7 left-1 @(collapseNavMenu ? "" : "-rotate-45 -translate-y-3")"></span>
    </button>
</div>

<div class="transition-all duration-300 md:block @(collapseNavMenu ? "hidden" : "block") sidebar">
    <nav class="flex flex-col md:flex-col items-center space-y-4 w-full mt-4
            md:flex-col md:space-y-4
            flex-row space-x-4 space-y-0 justify-center md:justify-start">
        <NavLink class="flex flex-col items-center w-full py-2 text-white hover:bg-gray-700/70 rounded-lg transition"
            href="merge">
            <MergeIcon Class="w-8 h-8" />
            <span class="text-[10px] mt-1 opacity-80">結合</span>
        </NavLink>
        <NavLink class="flex flex-col items-center w-full py-2 text-white hover:bg-gray-700/70 rounded-lg transition"
            href="split">
            <SplitIcon Class="w-8 h-8" />
            <span class="text-[10px] mt-1 opacity-80">分割</span>
        </NavLink>
        <NavLink class="flex flex-col items-center w-full py-2 text-white hover:bg-gray-700/70 rounded-lg transition"
            href="edit">
            <EditIcon Class="w-8 h-8" />
            <span class="text-[10px] mt-1 opacity-80">編集</span>
        </NavLink>
    </nav>
</div>

@code {
    private bool collapseNavMenu = true;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }

    private string GetPageTitle()
    {
        var uri = Navigation.Uri.ToLower();
        if (uri.EndsWith("/merge")) return "結合";
        if (uri.EndsWith("/split")) return "分割";
        if (uri.EndsWith("/edit")) return "編集";
        if (uri.EndsWith("/")) return "NoCloudPDF";
        // 必要に応じて他のページも追加
        return "";
    }
}