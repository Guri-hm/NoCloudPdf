@page "/"
@using NoCloudPdf.Pages
@using NoCloudPdf.Components
@inject NavigationManager Nav
@inject IJSRuntime JS

<PageTitle>NoCloudPDF</PageTitle>

<div class="flex flex-col items-center justify-center h-screen relative bg-gradient-home">
    <div class="absolute top-6 right-6 z-10">
        <InstallPwaButton id="install-pwa-btn" />
    </div>
    <h1 class="text-5xl md:text-7xl font-bold my-2">No Cloud PDF</h1>

    <img src="img/logo.svg" alt="NoCloudPDFのロゴ" width="128" height="128">

    <div class="flex items-center justify-center gap-6 mb-6">
        <div class="flex">
            <div class="w-[50px] h-[50px] bg-slate-600 shadow-[0_15px_20px_rgba(0,0,0,0.5)] animate-[ChangeColor_3s_infinite] flex items-center justify-center text-white text-2xl font-bold"
                style="will-change: margin, border-radius;">
                P
            </div>
            <div class="w-[50px] h-[50px] bg-slate-600 shadow-[0_15px_20px_rgba(0,0,0,0.5)] animate-[ChangeColor_3s_infinite] flex items-center justify-center text-white text-2xl font-bold"
                style="will-change: margin, border-radius;">
                D
            </div>
            <div class="w-[50px] h-[50px] bg-slate-600 shadow-[0_15px_20px_rgba(0,0,0,0.5)] animate-[ChangeColor_3s_infinite] flex items-center justify-center text-white text-2xl font-bold"
                style="will-change: margin, border-radius;">
                F
            </div>
        </div>
    </div>
    <div class="flex flex-col items-center mb-4 px-6">
        <p class="text-lg text-gray-700 text-center max-w-xl">
            ブラウザだけでPDFの結合・分割が可能。<br class="hidden md:inline" />ファイルは端末外へ送信されません。
        </p>
    </div>
    <div class="flex flex-col items-center mb-6 absolute bottom-6 md:bottom-0 px-6 cursor-pointer" @onclick="ScrollToSectionAsync">
        <span id="home-summary-tip" class="text-gray-500 text-lg mb-1">概要については下へスクロール</span>
        <ArrowDownIcon class="w-8 h-8 text-gray-400" />
    </div>
</div>
<section class="max-w-3xl mx-auto space-y-8 pb-20" @ref="sectionRef">
    <div class="flex flex-col gap-8">
        <FadeInOnScroll>
            <div class="grid grid-cols-1 md:grid-cols-2 items-center gap-6 rounded-xl p-8">
                <div class="flex-1">
                    <h2 class="font-extrabold text-4xl md:text-5xl mb-3 text-purple-800"><CheckIcon class="inline-block align-middle h-[1em] w-[1em]"/>セキュア</h2>
                    <p class="text-base leading-relaxed text-black">
                        セキュリティが心配ですか？PDFの処理はすべてお使いの端末内で完結し、ファイルが外部に送信されることはありません。
                    </p>
                </div>
                <div class="flex-shrink-0 flex justify-center">
                    <img src="img/cloud-block-2.svg" alt="Secure"
                        class="min-w-[200px] max-w-[200px] w-full h-auto object-contain text-center" />
                </div>
            </div>
        </FadeInOnScroll>
        <FadeInOnScroll>
            <div class="grid grid-cols-1 md:grid-cols-2 items-center gap-6 rounded-xl p-8">
                <div class="flex-1 md:order-2">
                    <h2 class="font-extrabold text-4xl md:text-5xl mb-3 text-purple-800"><CheckIcon class="inline-block align-middle h-[1em] w-[1em]"/>シンプル</h2>
                    <p class="text-base leading-relaxed text-black">
                        操作は直感的でシンプル。ドラッグ＆ドロップだけで簡単にPDFを扱えます。
                    </p>
                </div>
                <div class="flex-shrink-0 flex justify-center md:order-1">
                    <img src="img/mouse-261.svg" alt="Secure"
                        class="min-w-[200px] max-w-[200px] w-full h-auto object-contain text-center" />
                </div>
            </div>
        </FadeInOnScroll>
        <FadeInOnScroll>
            <div class="grid grid-cols-1 md:grid-cols-2 items-center gap-6 rounded-xl p-8">
                <div class="flex-1">
                    <h2 class="font-extrabold text-4xl md:text-5xl mb-3 text-purple-800"><WarningIcon class="inline-block align-middle h-[1em] w-[1em]"/>ブラウザ</h2>
                    <p class="text-base leading-relaxed text-black">
                        すべての処理をお使いのブラウザ上でおこなうため、大きなPDFは動作が遅くなったり、端末の性能によっては処理が重く感じられることがあります。あらかじめご了承ください。
                    </p>
                </div>
                <div class="flex-shrink-0 flex justify-center">
                    <img src="img/browser-98.svg" alt="Secure"
                        class="min-w-[200px] max-w-[200px] w-full h-auto object-contain text-center" />
                </div>
            </div>
        </FadeInOnScroll>
        <FadeInOnScroll>
            <div class="grid grid-cols-1 md:grid-cols-2 items-center gap-6 rounded-xl p-8">
                <div class="flex-1 md:order-2">
                    <h2 class="font-extrabold text-4xl md:text-5xl mb-3 text-purple-800"><WarningIcon class="inline-block align-middle h-[1em] w-[1em]"/>フォント</h2>
                    <p class="text-base leading-relaxed text-black">
                        Web技術の制約により、PDF内のフォントが正しく表示されない場合があります。処理後のPDFで文字化けや表示崩れが発生した場合は、PDF作成時にフォントを埋め込む設定になっているか、または標準フォントを使用しているかをご確認ください。
                    </p>
                </div>
                <div class="flex-shrink-0 flex justify-center md:order-1">
                    <img src="img/letter-japanese-a-svgrepo-com.svg" alt="Feedback"
                        class="min-w-[200px] max-w-[200px] w-full h-auto object-contain text-center" />
                </div>
            </div>
        </FadeInOnScroll>
        <FadeInOnScroll>
            <div class="grid grid-cols-1 md:grid-cols-2 items-center gap-6 rounded-xl p-8">
                <div class="flex-1">
                    <h2 class="font-extrabold text-4xl md:text-5xl mb-3 text-purple-800"><ChatIcon class="inline-block align-middle h-[1em] w-[1em]"/>ご意見</h2>
                    <p class="text-base leading-relaxed text-black">
                        本アプリに関するご意見やバグ報告などがありましたら、ぜひご連絡ください。フィードバックをもとに、より使いやすいサービスを目指します。
                    </p>
                </div>
                <div class="flex-shrink-0 flex justify-center">
                    <img src="img/comment-heart-1.svg" alt="Feedback"
                        class="min-w-[200px] max-w-[200px] w-full h-auto object-contain text-center" />
                </div>
            </div>
        </FadeInOnScroll>
    </div>
</section>
<section class="max-w-5xl mx-auto py-12">
    <h2 class="text-3xl md:text-4xl font-bold text-center mb-8 mx-2">
        今すぐPDFを操作してみましょう
    </h2>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- 結合 -->
        <div class="flex flex-col items-center justify-center bg-white rounded-xl shadow p-6 mx-2 md:mx-0">
            <MergeIcon Class="w-8 h-8" />
            <h3 class="text-lg font-bold text-purple-700 mb-2">PDF結合</h3>
            <p class="text-gray-700 text-center mb-4 text-sm">
                複数のPDFや画像ファイルを<br />ひとつのPDFにまとめます。
            </p>
            <a href="@($"{Nav.BaseUri}merge")" class="text-blue-600 underline font-bold hover:text-blue-800 transition">
                結合ページへ
            </a>
        </div>
        
        <!-- 分割 -->
        <div class="flex flex-col items-center justify-center bg-white rounded-xl shadow p-6 mx-2 md:mx-0">
            <SplitIcon Class="w-8 h-8" />
            <h3 class="text-lg font-bold text-purple-700 mb-2">PDF分割</h3>
            <p class="text-gray-700 text-center mb-4 text-sm">
                PDFファイルをページごとに<br />分割して保存できます。
            </p>
            <a href="@($"{Nav.BaseUri}split")" class="text-blue-600 underline font-bold hover:text-blue-800 transition">
                分割ページへ
            </a>
        </div>
        <!-- 編集 -->
        <div class="flex flex-col items-center justify-center bg-white rounded-xl shadow p-6 mx-2 md:mx-0">
            <EditIcon Class="w-8 h-8" />
            <h3 class="text-lg font-bold text-purple-700 mb-2">編集</h3>
            <p class="text-gray-700 text-center mb-4 text-sm">
                テキストや図形の追加、<br />注釈の挿入などが可能です。
            </p>
            <a href="@($"{Nav.BaseUri}edit")" class="text-blue-600 underline font-bold hover:text-blue-800 transition">
                編集ページへ
            </a>
        </div>
        
        <!-- レイアウト -->
        <div class="flex flex-col items-center justify-center bg-white rounded-xl shadow p-6 mx-2 md:mx-0">
            <LayoutIcon Class="w-8 h-8" />
            <h3 class="text-lg font-bold text-purple-700 mb-2">レイアウト</h3>
            <p class="text-gray-700 text-center mb-4 text-sm">
                複数ページを1枚に集約（Nアップ）<br />またはタイル分割できます。
            </p>
            <a href="@($"{Nav.BaseUri}layout")" class="text-blue-600 underline font-bold hover:text-blue-800 transition">
                レイアウトページへ
            </a>
        </div>
        
        <!-- トリミング -->
        <div class="flex flex-col items-center justify-center bg-white rounded-xl shadow p-6 mx-2 md:mx-0">
            <TrimIcon Class="w-8 h-8" />
            <h3 class="text-lg font-bold text-purple-700 mb-2">トリミング</h3>
            <p class="text-gray-700 text-center mb-4 text-sm">
                PDFページの余白を削除したり<br />必要な部分だけ切り抜きます。
            </p>
            <a href="@($"{Nav.BaseUri}trim")" class="text-blue-600 underline font-bold hover:text-blue-800 transition">
                トリミングページへ
            </a>
        </div>
        
        <!-- スライス -->
        <div class="flex flex-col items-center justify-center bg-white rounded-xl shadow p-6 mx-2 md:mx-0">
            <SliceIcon Class="w-8 h-8" />
            <h3 class="text-lg font-bold text-purple-700 mb-2">スライス</h3>
            <p class="text-gray-700 text-center mb-4 text-sm">
                ページの一部または指定範囲を画像ファイルとして切り出して保存できます。
            </p>
            <a href="@($"{Nav.BaseUri}slice")" class="text-blue-600 underline font-bold hover:text-blue-800 transition">
                スライスページへ
            </a>
        </div>
        
        
        <!-- 文字認識 -->
        <div class="flex flex-col items-center justify-center bg-white rounded-xl shadow p-6 mx-2 md:mx-0">
            <OcrIcon Class="w-8 h-8" />
            <h3 class="text-lg font-bold text-purple-700 mb-2">文字認識</h3>
            <p class="text-gray-700 text-center mb-4 text-sm">
                画像化されたPDFから<br />テキストを抽出します（OCR）。
            </p>
            <a href="@($"{Nav.BaseUri}ocr")" class="text-blue-600 underline font-bold hover:text-blue-800 transition">
                文字認識ページへ
            </a>
        </div>
        
        <!-- QRコード -->
        <div class="flex flex-col items-center justify-center bg-white rounded-xl shadow p-6 mx-2 md:mx-0">
            <QrCodeIcon Class="w-8 h-8" />
            <h3 class="text-lg font-bold text-purple-700 mb-2">QRコード</h3>
            <p class="text-gray-700 text-center mb-4 text-sm">
                画像やPDFからQRコードを読み取り、<br />カメラでスキャンできます。
            </p>
            <a href="@($"{Nav.BaseUri}qrcode")" class="text-blue-600 underline font-bold hover:text-blue-800 transition">
                QRコードページへ
            </a>
        </div>
    </div>
</section>

<!-- ThickSliceセクションの修正 -->
<section class="max-w-4xl mx-auto py-12">
    <FadeInOnScroll>
        <div
            class="bg-gradient-to-br from-slate-50 via-gray-50 to-blue-50 rounded-2xl p-8 shadow-lg border border-gray-200 relative mx-2 md:mx-0">

            <div class="flex flex-col md:flex-row items-center gap-8">
                <!-- 左側：ロゴとタイトル -->
                <div class="flex flex-col items-center md:items-start flex-shrink-0">
                    <img src="img/thickslice.svg" alt="ThickSlice" class="w-24 h-24 mb-4">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-2 text-center md:text-left">
                        ThickSlice
                    </h2>
                    <p class="text-lg text-slate-600 font-medium text-center md:text-left mb-2">
                        画像抽出専用ツール
                    </p>
                </div>

                <!-- 右側：説明と機能 -->
                <div class="flex-1">
                    <!-- 外部アプリであることの説明 -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <div class="flex items-start gap-3">
                            <div class="flex-shrink-0">
                                <InfoIcon Class="w-5 h-5 text-blue-600"/>
                            </div>
                            <div>
                                <p class="text-blue-800 font-semibold text-sm mb-1">外部サービスのご案内</p>
                                <p class="text-blue-700 text-sm">
                                    ThickSliceはNoCloudPDFとは別のサービスです。高品質な画像抽出機能を提供しており、NoCloudPDFの姉妹ツールとしてご利用いただけます。
                                </p>
                            </div>
                        </div>
                    </div>

                    <p class="text-gray-700 text-lg leading-relaxed mb-6">
                        PDFや画像ファイルから、矩形選択で必要な部分だけを抽出できるツールです。
                        <span class="text-slate-800 font-semibold">PDFのオリジナルサイズを保持した抽出</span>が他のアプリにない特長です。
                    </p>

                    <!-- 機能紹介グリッド（変更なし） -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                    <ActivityZoneIcon Class="w-5 h-5 text-blue-600"/>
                                </div>
                                <span class="font-semibold text-slate-700">矩形抽出</span>
                            </div>
                            <p class="text-sm text-gray-600">手動または自動判定で矩形を設定し画像抽出</p>
                        </div>

                        <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                    <RawIcon Class=" text-green-600"/>
                                </div>
                                <span class="font-semibold text-slate-700">原寸維持</span>
                            </div>
                            <p class="text-sm text-gray-600">PDFの元解像度を維持した出力</p>
                        </div>

                        <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                            <div class="flex items-center gap-2 mb-2">
                                <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                                    <TaskIcon Class="w-5 h-5 text-purple-600"/>
                                </div>
                                <span class="font-semibold text-slate-700">多形式対応</span>
                            </div>
                            <p class="text-sm text-gray-600">PDF・PNG・JPEG・WebP対応</p>
                        </div>
                    </div>

                    <!-- 注意事項（修正版） -->
                    <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
                        <div class="flex items-start gap-3">
                            <div class="flex-shrink-0">
                                <WarningIcon Class="w-5 h-5 text-amber-600"/>
                            </div>
                            <div>
                                <p class="text-amber-800 font-semibold text-sm mb-1">
                                    クラウド処理について
                                </p>
                                <p class="text-amber-700 text-sm">
                                    ThickSliceはNoCloudPDFとは異なりサーバー上で処理をおこないます。処理後にファイルは自動削除されますが、機密文書の使用はご注意ください。
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- CTA ボタン（修正版） -->
                    <div class="text-center">
                        <a href="https://solopg.com/app/thickslice/" target="_blank" rel="noopener"
                            class="inline-flex items-center gap-3 bg-gradient-to-r from-slate-700 to-blue-700 hover:from-slate-800 hover:to-blue-800 text-white font-bold py-3 px-8 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105">
                            ThickSliceを開く（外部サイト）
                            <ArrowRightIcon Class="w-5 h-5 text-white"/>
                        </a>
                        <p class="text-xs text-gray-500 mt-2">※ 新しいタブで外部サイトが開きます</p>
                    </div>
                </div>
            </div>
        </div>
    </FadeInOnScroll>
</section>
<footer class="w-full bg-gradient-to-r from-purple-100 via-gray-100 to-blue-100 border-t mt-12 py-8 shadow-inner">
    <div class="max-w-3xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4 px-4">
        <div class="flex items-center gap-3">
            <span class="text-gray-700 text-base font-semibold">開発者:
                Guri-hm</span>
            <a href="https://github.com/Guri-hm/NoCloudPdf" target="_blank" rel="noopener"
                class="flex items-center gap-2 text-gray-800 hover:text-purple-700 transition-colors duration-200 font-mono text-lg">
                <GithubIcon Class="w-6 h-6" />
            </a>
            <a href="mailto:contact@solopg.com"
                class="flex items-center gap-2 text-gray-800 hover:text-purple-700 transition-colors duration-200 font-mono text-lg">
                <MailIcon Class="w-6 h-6" />
            </a>
        </div>
        <div class="text-xs text-gray-500 mt-2 md:mt-0 text-center md:text-right">
            &copy; 2025 NoCloudPDF<br class="md:hidden" />
            <span class="inline-block">Powered by Blazor WebAssembly</span>
        </div>
    </div>
    <div class="max-w-3xl mx-auto mt-6 pt-4 border-t border-gray-300">
        <div class="flex flex-wrap justify-center gap-4 text-sm">
            <a href="/privacy" class="text-gray-700 hover:text-purple-700 transition-colors font-semibold">
                プライバシーポリシー
            </a>
            <span class="text-gray-400">|</span>
            <a href="/terms" class="text-gray-700 hover:text-purple-700 transition-colors font-semibold">
                利用規約
            </a>
            <span class="text-gray-400">|</span>
            <a href="/contact" class="text-gray-700 hover:text-purple-700 transition-colors font-semibold">
                お問い合わせ
            </a>
        </div>
    </div>
</footer>

@code {
    private ElementReference sectionRef;

    private async Task ScrollToSectionAsync()
    {
        await JS.InvokeVoidAsync("scrollToSection", sectionRef);
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            try
            {
                await JS.InvokeVoidAsync("startTourIfNeeded");
            }
            catch { }
        }
    }
}